<html>
<head>
<script type="module">

// @encodeBgn

import "./res/script/common.js";

var Z_BACK_BACK = 1;
var Z_BACK_BACK_NEXT = 2;
var Z_BACK_FRONT = 3;
var Z_BACK_FRONT_NEXT = 4;
var Z_PANEL = 5;
var Z_CONTROL = 6;
var Z_TEXT = 7;

var BackgroundImageSrcList;
var CurrBackgroundImageSrcIndex;
var BackBack  = null;
var BackFront = null;

function Main() {
	ENG_Add([

	]);

	ENG_AddResized(function() {
		// TODO
	});
}

function ChangeBackgroundImage() {
	var lastBB = BackBack;
	var lastBF = BackFront;

	CurrBackgroundImageSrcIndex = Math.floor(Math.random() * BackgroundImageSrcList.length);

	BackBack = document.createElement("img");
	BackBack.style.opacity = 0.5;
	BackBack.style.zIndex = Z_BACK_BACK_NEXT;

	BackFront = document.createElement("img");
	BackFront.style.zIndex = Z_BACK_FRONT_NEXT;

	ChangeBackgroundImageSize();

	document.body.appendChild(BackBack);
	document.body.appendChild(BackFront);

	SetScenario([
		100,
		function() {
			//
		},
	]);
}

function ChangeBackgroundImageSize() {
	if(BackBack == null) {
		return;
	}


}

function SetScenario(scenario) {
	var next = function() { };

	for(var i = scenario.length - 2; 0 <= i; i -= 2) {
		next = AddScenarioPart(
			scenario[i + 0],
			scenario[i + 1],
			next
			);
	}
	next();
}

function AddScenarioPart(t, f, next) {
	return function() {
		setTimeout(function() {
			f();
			next();
		},
		t
		);
	};
}

function Request(prm, def, next) {
	var xhr = new XMLHttpRequest();

	xhr.onreadystatechange = function() {
		if(xhr.readyState == 4) {
			if(xhr.status == 200) {
				next(JSON.parse(xhr.responseText));
			}
			else {
				next(def);
			}
		}
	};

	xhr.open("POST", "/corona/corona?sn=index");
	xhr.send(JSON.stringify(prm));
}

// @encodeEnd

</script>
<style>

body {
	margin: 0px;
}

.root {
	width: 100%;
	height: 100%;
	overflow-x: hidden;
	overflow-y: hidden;
	background-color: #000;
	color: #fff;
}

</style>
</head>
<body>
<div class="root">
</div>
</body>
</html>
